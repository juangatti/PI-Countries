import _JSXStyle from "styled-jsx/style";
import React, { useMemo } from 'react';
import useTheme from '../use-theme';
import withDefaults from '../utils/with-defaults';
import { getNormalColor, addColorAlpha } from '../utils/color';
import { getLoaderSize, getLoaderBorder, getLabelStyle } from './styles';
import Spinner from './spinner';
import { jsx as _jsx } from "react/jsx-runtime";
import { jsxs as _jsxs } from "react/jsx-runtime";
const defaultProps = {
  size: 'medium',
  color: 'primary',
  type: 'default'
};

const Loading = ({
  children,
  size,
  color,
  gradientBackground,
  textColor,
  type,
  ...props
}) => {
  const theme = useTheme();
  const width = useMemo(() => typeof size === 'number' ? `${size}px` : getLoaderSize(type)[size], [size, type]);
  const border = useMemo(() => typeof size === 'number' ? `calc(${size}px / ${size} + ${size > 10 ? '2px' : '1px'})` : getLoaderBorder(size), [size]);
  const labelColor = useMemo(() => getNormalColor(textColor, theme.palette), [color, theme.palette]);
  const labelStyle = useMemo(() => getLabelStyle(type, theme, labelColor)[size], [type, size, theme, labelColor]);
  const bgColor = useMemo(() => getNormalColor(color, theme.palette, theme.palette.text), [color, theme.palette]);

  if (type === 'spinner') {
    return /*#__PURE__*/_jsx(Spinner, {
      size: width,
      color: bgColor,
      labelStyle: labelStyle,
      ...props,
      children: children
    });
  }

  const ariaLabel = children ? "" : "Loading";
  return /*#__PURE__*/_jsxs("div", { ...props,
    className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]) + " " + (props && props.className != null && props.className || "loading-container"),
    children: [/*#__PURE__*/_jsxs("span", {
      "aria-label": ariaLabel,
      className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]) + " " + `loading ${type}`,
      children: [/*#__PURE__*/_jsx("i", {
        className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]) + " " + "_1"
      }), /*#__PURE__*/_jsx("i", {
        className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]) + " " + "_2"
      }), /*#__PURE__*/_jsx("i", {
        className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]) + " " + "_3"
      })]
    }), children && /*#__PURE__*/_jsx("label", {
      style: labelStyle,
      className: _JSXStyle.dynamic([["1222717962", [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width]]]),
      children: children
    }), /*#__PURE__*/_jsx(_JSXStyle, {
      id: "1222717962",
      dynamic: [theme.layout.gapQuarter, width, width, width, width, width, border, bgColor, border, border, border, border, bgColor, border, border, border, width, width, bgColor, width, width, bgColor, addColorAlpha(theme.palette.background, 0), bgColor, gradientBackground || theme.palette.background, width],
      children: `.loading-container.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}label.__jsx-style-dynamic-selector{margin-top:${theme.layout.gapQuarter};}label.__jsx-style-dynamic-selector *{margin:0;}.loading.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.loading.default.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:50%;position:relative;width:${width};height:${width};}.loading.points-opacity.__jsx-style-dynamic-selector,.loading.points.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;}.loading.gradient.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;width:${width};height:${width};}.loading.points.__jsx-style-dynamic-selector{-webkit-transform:translate(0,calc(${width} * 0.6));-ms-transform:translate(0,calc(${width} * 0.6));transform:translate(0,calc(${width} * 0.6));}.loading.default.__jsx-style-dynamic-selector i.__jsx-style-dynamic-selector{top:0px;width:100%;height:100%;position:absolute;border-radius:inherit;}.loading.default.__jsx-style-dynamic-selector ._1.__jsx-style-dynamic-selector{border:${border} solid ${bgColor};border-top:${border} solid transparent;border-left:${border} solid transparent;border-right:${border} solid transparent;-webkit-animation:rotate-__jsx-style-dynamic-selector 0.8s ease infinite;animation:rotate-__jsx-style-dynamic-selector 0.8s ease infinite;}.loading.default.__jsx-style-dynamic-selector ._2.__jsx-style-dynamic-selector{border:${border} dotted ${bgColor};border-top:${border} solid transparent;border-left:${border} solid transparent;border-right:${border} solid transparent;-webkit-animation:rotate-__jsx-style-dynamic-selector 0.8s linear infinite;animation:rotate-__jsx-style-dynamic-selector 0.8s linear infinite;opacity:0.5;}.loading.default.__jsx-style-dynamic-selector ._3.__jsx-style-dynamic-selector{display:none;}.loading.points-opacity.__jsx-style-dynamic-selector i.__jsx-style-dynamic-selector{display:inline-block;width:${width};height:${width};border-radius:50%;background-color:${bgColor};margin:0 1px;-webkit-animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;}.loading.points-opacity.__jsx-style-dynamic-selector ._2.__jsx-style-dynamic-selector{-webkit-animation-delay:0.2s;animation-delay:0.2s;}.loading.points-opacity.__jsx-style-dynamic-selector ._3.__jsx-style-dynamic-selector{-webkit-animation-delay:0.4s;animation-delay:0.4s;}.loading.points.__jsx-style-dynamic-selector i.__jsx-style-dynamic-selector{width:${width};height:${width};margin:0 3px;background:${bgColor};}.loading.points.__jsx-style-dynamic-selector ._1.__jsx-style-dynamic-selector{border-radius:50%;-webkit-animation:points-__jsx-style-dynamic-selector 0.75s ease infinite;animation:points-__jsx-style-dynamic-selector 0.75s ease infinite;}.loading.points.__jsx-style-dynamic-selector ._2.__jsx-style-dynamic-selector{border-radius:50%;-webkit-animation:points-__jsx-style-dynamic-selector 0.75s ease infinite 0.25s;animation:points-__jsx-style-dynamic-selector 0.75s ease infinite 0.25s;}.loading.points.__jsx-style-dynamic-selector ._3.__jsx-style-dynamic-selector{border-radius:50%;-webkit-animation:points-__jsx-style-dynamic-selector 0.75s ease infinite 0.5s;animation:points-__jsx-style-dynamic-selector 0.75s ease infinite 0.5s;}.loading.gradient.__jsx-style-dynamic-selector ._1.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;border:0px;border-radius:inherit;-webkit-animation:rotate-__jsx-style-dynamic-selector 1s linear infinite;animation:rotate-__jsx-style-dynamic-selector 1s linear infinite;top:0px;background:linear-gradient( 0deg, ${addColorAlpha(theme.palette.background, 0)} 33%, ${bgColor} 100% );border-radius:50%;}.loading.gradient.__jsx-style-dynamic-selector ._2.__jsx-style-dynamic-selector{top:2px;position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);border:0px;border-radius:inherit;background:${gradientBackground || theme.palette.background};border-radius:50%;}.loading.gradient.__jsx-style-dynamic-selector ._3.__jsx-style-dynamic-selector{display:none;}@-webkit-keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}@keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}@-webkit-keyframes rotate-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes rotate-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@-webkit-keyframes points-__jsx-style-dynamic-selector{0%{-webkit-transform:translate(0px,0px);-ms-transform:translate(0px,0px);transform:translate(0px,0px);}50%{-webkit-transform:translate(0,calc(-${width} * 1.4));-ms-transform:translate(0,calc(-${width} * 1.4));transform:translate(0,calc(-${width} * 1.4));}100%{-webkit-transform:translate(0px,0px);-ms-transform:translate(0px,0px);transform:translate(0px,0px);}}@keyframes points-__jsx-style-dynamic-selector{0%{-webkit-transform:translate(0px,0px);-ms-transform:translate(0px,0px);transform:translate(0px,0px);}50%{-webkit-transform:translate(0,calc(-${width} * 1.4));-ms-transform:translate(0,calc(-${width} * 1.4));transform:translate(0,calc(-${width} * 1.4));}100%{-webkit-transform:translate(0px,0px);-ms-transform:translate(0px,0px);transform:translate(0px,0px);}}`
    })]
  });
};

const MemoLoading = /*#__PURE__*/React.memo(Loading);
export default withDefaults(MemoLoading, defaultProps);